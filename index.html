<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8" />
    <title>Karakter Katalogu</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <div id="app">

        <!-- GİRİŞ EKRANI -->
        <section id="login-screen" class="screen">
            <div class="card card-login">
                <h1>Proje Katalog Girişi</h1>
                <form id="login-form">
                    <label>
                        Kullanıcı Adı
                        <input type="text" id="username" autocomplete="username" required />
                    </label>
                    <label>
                        Şifre
                        <input type="password" id="password" autocomplete="current-password" required />
                    </label>
                    <button type="submit" class="btn primary">Giriş Yap</button>
                    <p id="login-error" class="error-message"></p>
                </form>
            </div>
        </section>

        <!-- ANA EKRAN -->
        <section id="main-screen" class="screen hidden">
            <header class="topbar">
                <div class="topbar-left">
                    <h1>Karakter Katalogu</h1>
                    <span id="current-user-info" class="pill"></span>
                </div>
                <div class="topbar-right">
                    <button id="users-management-btn" class="btn subtle" style="display: none; margin-right: 8px;">Kullanıcı Yönetimi</button>
                    <button id="logout-btn" class="btn subtle">Çıkış</button>
                </div>
            </header>

            <main class="layout">
                <!-- PROJE LİSTESİ -->
                <aside class="sidebar">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                        <h2 style="margin: 0;">Projeler</h2>
                        <button id="add-project-btn" class="btn primary" style="font-size: 12px; padding: 4px 8px; display: none;">
                            + Ekle
                        </button>
                    </div>
                    <ul id="project-list" class="project-list">
                        <!-- JS ile doldurulacak -->
                    </ul>
                </aside>

                <!-- KATALOG / KARAKTERLER -->
                <section class="content">
                    <div class="content-header">
                        <h2 id="current-project-title">Proje Seçilmedi</h2>
                        <button id="add-character-btn" class="btn primary" disabled>
                            + Karakter Ekle
                        </button>
                    </div>

                    <div id="characters-container" class="characters-grid">
                        <!-- JS ile doldurulacak -->
                    </div>
                </section>
            </main>
        </section>

        <!-- PROJE EKLE / DÜZENLE MODALI -->
        <div id="project-modal" class="modal hidden">
            <div class="modal-backdrop" id="project-modal-backdrop"></div>
            <div class="modal-content">
                <h3 id="project-modal-title">Yeni Proje</h3>
                <form id="project-form">
                    <label>
                        Proje Adı
                        <input type="text" id="project-name" required />
                    </label>
                    <label>
                        Açıklama
                        <textarea id="project-description" rows="3" placeholder="Proje hakkında kısa açıklama..."></textarea>
                    </label>
                    <div class="modal-actions">
                        <button type="button" id="discard-project-btn" class="btn subtle">
                            Discard
                        </button>
                        <button type="submit" class="btn primary">
                            Save
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- KARAKTER DETAY EKRANI -->
        <section id="character-detail-screen" class="screen hidden">
            <header class="topbar">
                <div class="topbar-left">
                    <button id="back-to-list-btn" class="btn subtle" style="margin-right: 12px;">← Geri</button>
                    <h1 id="character-detail-name">Karakter Detayı</h1>
                </div>
                <div class="topbar-right">
                    <button id="edit-character-btn" class="btn primary" style="display: none;">Düzenle</button>
                    <button id="logout-btn-2" class="btn subtle">Çıkış</button>
                </div>
            </header>

            <main class="character-detail-content">
                <div class="character-detail-header">
                    <div class="character-detail-main-image-wrapper">
                        <img id="character-detail-main-image" src="" alt="Ana görsel" />
                    </div>
                    <div class="character-detail-info">
                        <h2 id="character-detail-full-name"></h2>
                        <div id="character-detail-meta"></div>
                        <div id="character-detail-traits"></div>
                    </div>
                </div>

                <div class="character-images-section">
                    <div class="section-header">
                        <h3>Resim Kataloğu</h3>
                        <button id="add-image-btn" class="btn primary" style="display: none;">+ Resim Ekle</button>
                    </div>
                    <div id="character-images-grid" class="character-images-grid">
                        <!-- JS ile doldurulacak -->
                    </div>
                </div>
            </main>
        </section>

        <!-- KARAKTER EKLE / DÜZENLE MODALI -->
        <div id="character-modal" class="modal hidden">
            <div class="modal-backdrop" id="character-modal-backdrop"></div>
            <div class="modal-content">
                <h3 id="character-modal-title">Yeni Karakter</h3>
                <form id="character-form">
                    <div class="form-row">
                        <label>
                            İsim
                            <input type="text" id="char-first-name" required />
                        </label>
                        <label>
                            Soyisim
                            <input type="text" id="char-last-name" required />
                        </label>
                    </div>

                    <label>
                        Karakteristik Özellikler
                        <textarea id="char-traits" rows="3" placeholder="Kısa açıklama..."></textarea>
                    </label>

                    <div class="form-row">
                        <label>
                            Burcu
                            <input type="text" id="char-zodiac" />
                        </label>
                        <label>
                            Yaş
                            <input type="number" id="char-age" min="0" />
                        </label>
                    </div>

                    <label>
                        Karakter Resmi
                        <input type="file" id="char-image" accept="image/*" />
                    </label>

                    <div class="image-preview" id="char-image-preview-wrapper">
                        <img id="char-image-preview" alt="Önizleme" />
                    </div>

                    <div class="modal-actions">
                        <button type="button" id="discard-character-btn" class="btn subtle">
                            Discard
                        </button>
                        <button type="submit" class="btn primary">
                            Save
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- RESİM EKLE / DÜZENLE MODALI -->
        <div id="image-modal" class="modal hidden">
            <div class="modal-backdrop" id="image-modal-backdrop"></div>
            <div class="modal-content">
                <h3 id="image-modal-title">Yeni Resim</h3>
                <form id="image-form">
                    <label>
                        Resim Başlığı
                        <input type="text" id="image-title" required />
                    </label>
                    <label>
                        Açıklama
                        <textarea id="image-description" rows="2"></textarea>
                    </label>
                    <label>
                        Etiketler (virgülle ayırın)
                        <input type="text" id="image-tags" placeholder="sprite, cg, battle" />
                    </label>
                    <label>
                        Resim Dosyası
                        <input type="file" id="image-file" accept="image/*" required />
                    </label>
                    <div class="image-preview" id="image-preview-wrapper">
                        <img id="image-preview" alt="Önizleme" />
                    </div>
                    <div class="modal-actions">
                        <button type="button" id="discard-image-btn" class="btn subtle">
                            Discard
                        </button>
                        <button type="submit" class="btn primary">
                            Save
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- RESİM ÖNİZLEME MODALI -->
        <div id="image-view-modal" class="modal hidden">
            <div class="modal-backdrop" id="image-view-modal-backdrop"></div>
            <div class="modal-content" style="max-width: 90vw; max-height: 90vh;">
                <div style="text-align: right; margin-bottom: 12px;">
                    <button id="close-image-view-btn" class="btn subtle">×</button>
                </div>
                <img id="image-view-large" src="" alt="Büyük görsel" style="max-width: 100%; max-height: 70vh; object-fit: contain; border-radius: 8px;" />
                <div id="image-view-info" style="margin-top: 16px;">
                    <h4 id="image-view-title"></h4>
                    <p id="image-view-description"></p>
                    <div id="image-view-tags"></div>
                </div>
            </div>
        </div>

        <!-- KULLANICI YÖNETİMİ EKRANI -->
        <section id="users-management-screen" class="screen hidden">
            <header class="topbar">
                <div class="topbar-left">
                    <button id="back-to-main-btn" class="btn subtle" style="margin-right: 12px;">← Geri</button>
                    <h1>Kullanıcı Yönetimi</h1>
                </div>
                <div class="topbar-right">
                    <button id="add-user-btn" class="btn primary">+ Kullanıcı Ekle</button>
                    <button id="logout-btn-3" class="btn subtle">Çıkış</button>
                </div>
            </header>

            <main class="content" style="padding: 16px;">
                <div id="users-list" class="users-list">
                    <!-- JS ile doldurulacak -->
                </div>
            </main>
        </section>

        <!-- KULLANICI EKLE / DÜZENLE MODALI -->
        <div id="user-modal" class="modal hidden">
            <div class="modal-backdrop" id="user-modal-backdrop"></div>
            <div class="modal-content">
                <h3 id="user-modal-title">Yeni Kullanıcı</h3>
                <form id="user-form">
                    <label>
                        Kullanıcı Adı
                        <input type="text" id="user-username" required />
                    </label>
                    <label>
                        Şifre
                        <input type="password" id="user-password" />
                        <small style="color: var(--text-muted); font-size: 12px;">Düzenleme sırasında boş bırakırsanız şifre değişmez</small>
                    </label>
                    <label>
                        Rol
                        <select id="user-role" required>
                            <option value="user">User</option>
                            <option value="admin">Admin</option>
                        </select>
                    </label>
                    <label>
                        Projeler (virgülle ayırın, proje ID'leri)
                        <input type="text" id="user-projects" placeholder="proje-1, proje-2" />
                        <small style="color: var(--text-muted); font-size: 12px;">Kullanıcının erişebileceği proje ID'lerini virgülle ayırarak girin</small>
                    </label>
                    <div class="modal-actions">
                        <button type="button" id="discard-user-btn" class="btn subtle">
                            Discard
                        </button>
                        <button type="submit" class="btn primary">
                            Save
                        </button>
                    </div>
                </form>
            </div>
        </div>

    </div>

    <script src="app.js"></script>
</body>
</html>
